from servers import get_current_server
from malware import Malware
from colorama import Fore, Style

def execute_malware_list():
    """List available malware types"""
    Malware.list_available()

def execute_malware_status():
    """Check status of deployed malware"""
    server = get_current_server()
    if not server:
        print(f"{Fore.RED}Not connected to any server{Style.RESET_ALL}")
        return

    if not server.get("malware", []):
        print(f"{Fore.YELLOW}No malware deployed on this server{Style.RESET_ALL}")
        return

    print(f"\n{Fore.CYAN}Deployed Malware:{Style.RESET_ALL}")
    for mal in server["malware"]:
        print(f"- {mal['type'].title()}")
        print(f"  Income Rate: ${mal['income']}/min")
        print(f"  Detection Risk: {mal['detection_rate']}%")

def execute_malware_deploy(malware_type):
    """Deploy malware to current server"""
    if not malware_type:
        print(f"{Fore.YELLOW}Usage: malware deploy <type>{Style.RESET_ALL}")
        return

    server = get_current_server()
    if not server:
        print(f"{Fore.RED}Not connected to any server{Style.RESET_ALL}")
        return

    Malware.deploy(server, malware_type.lower())
